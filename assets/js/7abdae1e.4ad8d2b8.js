"use strict";(self.webpackChunkhashed_network_docs=self.webpackChunkhashed_network_docs||[]).push([[4831],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=p(a),h=r,m=d["".concat(s,".").concat(h)]||d[h]||c[h]||l;return a?n.createElement(m,o(o({ref:t},u),{},{components:a})):n.createElement(m,o({ref:t},u))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=h;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:r,o[1]=i;for(var p=2;p<l;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},22070:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const l={title:"General Architecture",sidebar_position:1},o=void 0,i={unversionedId:"general_architecture",id:"general_architecture",title:"General Architecture",description:"Hashed Systems is a blockchain based platform that allows users to create and manage their own marketplaces, and to create and manage their own assets. It is built on top of Substrate, and uses the Afloat framework.",source:"@site/docs/general_architecture.md",sourceDirName:".",slug:"/general_architecture",permalink:"/general_architecture",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"General Architecture",sidebar_position:1},sidebar:"docs",previous:{title:"Component Overview",permalink:"/"},next:{title:"Bitcoin Orchestration",permalink:"/nbv"}},s={},p=[{value:"<strong>Components</strong>",id:"components",level:2},{value:"General architecture Diagram",id:"general-architecture-diagram",level:2},{value:"How to deploy and configure a full system locally.",id:"how-to-deploy-and-configure-a-full-system-locally",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Deploying the blockchain",id:"deploying-the-blockchain",level:3},{value:"Running a local node",id:"running-a-local-node",level:4},{value:"Setup the pallets",id:"setup-the-pallets",level:4},{value:"Faucet Server",id:"faucet-server",level:3},{value:"Starting local Web App server",id:"starting-local-web-app-server",level:3}],u={toc:p},d="wrapper";function c(e){let{components:t,...a}=e;return(0,r.kt)(d,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Hashed Systems is a blockchain based platform that allows users to create and manage their own marketplaces, and to create and manage their own assets. It is built on top of Substrate, and uses the Afloat framework."),(0,r.kt)("h2",{id:"components"},(0,r.kt)("strong",{parentName:"h2"},"Components")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Component"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Afloat Client API")),(0,r.kt)("td",{parentName:"tr",align:null},"This client api is used to provide methods to interact with gatedMarketplace, uniques and fruniques pallets and go through Afloat specific flow.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Marketplace UI")),(0,r.kt)("td",{parentName:"tr",align:null},"This is the UI for the Hashed Network Portal, it allows users to interact with all the components of the system.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Marketplace pallet")),(0,r.kt)("td",{parentName:"tr",align:null},"This pallet allows users to create and manage their own marketplaces.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Fruniques pallet")),(0,r.kt)("td",{parentName:"tr",align:null},"This pallet allows users to create and manage their own fractional assets. It's built on top of Uniques pallet")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Confidential Documents Server")),(0,r.kt)("td",{parentName:"tr",align:null},"This server provides the backend services for the Hashed Confidential docs services.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Confidential Documents API")),(0,r.kt)("td",{parentName:"tr",align:null},"This client api is used to provide methods to interact with the Hashed Confidential docs services.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Faucet Server")),(0,r.kt)("td",{parentName:"tr",align:null},"This server provides the backend services for token distribution for new accounts, reducing friction for user onboarding.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Repositories"),"\n(all MIT licensed)"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Component"),(0,r.kt)("th",{parentName:"tr",align:null},"Repo"),(0,r.kt)("th",{parentName:"tr",align:null},"Language"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Afloat Client API"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/hashed-io/afloat-client-api"},"https://github.com/hashed-io/afloat-client-api")),(0,r.kt)("td",{parentName:"tr",align:null},"Javascript")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Marketplace UI"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/hashed-io/hashed-network-portal-ui"},"https://github.com/hashed-io/hashed-network-portal-ui")),(0,r.kt)("td",{parentName:"tr",align:null},"Quasar/Vue")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Marketplace pallet"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/hashed-io/hashed-substrate/tree/develop/pallets/gated-marketplace"},"https://github.com/hashed-io/hashed-substrate/tree/develop/pallets/gated-marketplace")),(0,r.kt)("td",{parentName:"tr",align:null},"Rust")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Fruniques pallet"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/hashed-io/hashed-substrate/tree/develop/pallets/fruniques"},"https://github.com/hashed-io/hashed-substrate/tree/develop/pallets/fruniques")),(0,r.kt)("td",{parentName:"tr",align:null},"Rust")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Confidential Documents Server"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/hashed-io/hashed-private-server"},"https://github.com/hashed-io/hashed-private-server")),(0,r.kt)("td",{parentName:"tr",align:null},"Javascript")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Confidential Documents API"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/hashed-io/hashed-confidential-docs-client-api"},"https://github.com/hashed-io/hashed-confidential-docs-client-api")),(0,r.kt)("td",{parentName:"tr",align:null},"Javascript")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Faucet Server"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/hashed-io/faucet-server"},"https://github.com/hashed-io/faucet-server")),(0,r.kt)("td",{parentName:"tr",align:null},"Javascript")))),(0,r.kt)("h2",{id:"general-architecture-diagram"},"General architecture Diagram"),(0,r.kt)("mermaid",{value:'    C4Context\n      title Hashed Systems\n      Enterprise_Boundary(b0, "Hashed Systems") {\n        Person(customerA, "End user", "A blockchain user")\n\n        System(WebApp, "Web App", "Allows users to interact with all the components of the system")\n\n        Enterprise_Boundary(b1, "Hashed Backend") {\n\n          System(AfloatClientAPI, "Afloat Client API", "This client api is used to provide methods to interact with gatedMarketplace, uniques and fruniques pallets and go through Afloat specific flow.")\n\n          System_Boundary(b2, "Confidential Documents") {\n            System(ConfidentialDocumentsAPI, "Confidential Documents API", "Enables the usage of the Hashed Confidential docs services by client applications.")\n            System(ConfidentialDocumentsServer, "Confidential Documents Server", "The services provided by this server are called via hasura actions and as such are exposed through the hasura graphql endpoint.")\n            System(FaucetServer, "Faucet Server", "Provides the backend services for token distribution for new accounts, reducing friction for user onboarding.")\n\n          }\n\n          System_Boundary(b3, "Hashed Blockchain") {\n            System(GatedMarketplace, "Gated Marketplaces", "Allows users to buy and sell tokens on the blockchain")\n            System(FruniquesPallet, "Fruniques", "Allows users to create assets on the blockchain")\n            System(RBAC, "Role Based Access Control", "Allows users to manage their roles and permissions in all the pallets")\n            System(FundAdmin, "Fund Admin")\n            System(ConfidentialDocuments, "Confidential documents")\n            System(NativeBitcoinVaults, "Native Bitcoin Vaults")\n          }\n\n        }\n      }\n\n      BiRel(customerA, WebApp, "Uses")\n\n      BiRel(WebApp, AfloatClientAPI, "Sends transactions to")\n      BiRel(WebApp, ConfidentialDocumentsAPI, "Allow user to log with Google account,"," and upload / share confidential documents")\n\n      Rel(AfloatClientAPI, GatedMarketplace, "Sends transactions to")\n      Rel(AfloatClientAPI, FruniquesPallet, "Sends transactions to")\n\n\n      Rel(GatedMarketplace, FruniquesPallet, "<br>Sends transactions to")\n\n      BiRel(GatedMarketplace, RBAC, "Manages roles and permissions")\n      BiRel(FruniquesPallet, RBAC, "Manages roles and permissions")\n      BiRel(FundAdmin, RBAC, "Manages roles and permissions")\n\n      BiRel(ConfidentialDocumentsAPI, ConfidentialDocumentsServer, "")\n      BiRel(ConfidentialDocumentsAPI, FaucetServer, "")\n\n      UpdateRelStyle(WebApp, SystemE, $textColor="blue", $lineColor="blue", $offsetY="-10")\n      UpdateRelStyle(WebApp, ConfidentialDocumentsAPI, $textColor="blue", $lineColor="blue", $offsetY="-40", $offsetX="-50")\n\n      UpdateLayoutConfig($c4ShapeInRow="2", $c4BoundaryInRow="1")\n'}),(0,r.kt)("h2",{id:"how-to-deploy-and-configure-a-full-system-locally"},"How to deploy and configure a full system locally."),(0,r.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"You need some tools to be able to run the system locally."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.substrate.io/install/"},"Substrate")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://nodejs.org/en/download/"},"NodeJS 16")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://classic.yarnpkg.com/en/docs/install/#debian-stable"},"yarn"))),(0,r.kt)("h3",{id:"deploying-the-blockchain"},"Deploying the blockchain"),(0,r.kt)("p",null,"Clone the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/hashed-io/hashed-substrate"},"Hashed Substrate")," repo, and checkout the develop branch."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:hashed-io/hashed-substrate.git\ncd hashed-substrate\ngit checkout develop\n")),(0,r.kt)("h4",{id:"running-a-local-node"},"Running a local node"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --bin hashed --release -- --dev\n")),(0,r.kt)("h4",{id:"setup-the-pallets"},"Setup the pallets"),(0,r.kt)("p",null,"Go to the ",(0,r.kt)("a",{parentName:"p",href:"https://polkadot.js.org/apps/?rpc=ws%3A%2F%2F127.0.0.1%3A9944#/explorer"},"Polkadot webside"),", make sure you are connected to the local node."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Go to the ",(0,r.kt)("inlineCode",{parentName:"li"},"Developer")," tab and click on ",(0,r.kt)("inlineCode",{parentName:"li"},"Sudo")),(0,r.kt)("li",{parentName:"ul"},"Select ",(0,r.kt)("inlineCode",{parentName:"li"},"gatedMarketplace")," pallet and search for the extrinsic ",(0,r.kt)("inlineCode",{parentName:"li"},"initialSetup()"),", then click on ",(0,r.kt)("inlineCode",{parentName:"li"},"Submit Transaction")),(0,r.kt)("li",{parentName:"ul"},"Select ",(0,r.kt)("inlineCode",{parentName:"li"},"fruniques")," pallet and search for the extrinsic ",(0,r.kt)("inlineCode",{parentName:"li"},"initialSetup()"),", then click on ",(0,r.kt)("inlineCode",{parentName:"li"},"Submit Transaction"))),(0,r.kt)("p",null,"This steps are required in order to setup the pallets and create the required roles and permissions."),(0,r.kt)("h3",{id:"faucet-server"},"Faucet Server"),(0,r.kt)("p",null,"You would need to run the faucet locally, this is the repo for it: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/hashed-io/faucet-server"},"https://github.com/hashed-io/faucet-server"),", there is a README file explaining how to run it but you should be able to run it with the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run start:all image\n")),(0,r.kt)("p",null,"Before running the faucet you should have the node running locally, as the faucet connects to it, this is configured in the .env.all file.\nYou would also need to updated the front-end env file, to point to the local faucet:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"FAUCET_SERVER_URL = 'http://localhost:3000'\n")),(0,r.kt)("h3",{id:"starting-local-web-app-server"},"Starting local Web App server"),(0,r.kt)("p",null,"To run the web app locally you must go through the following steps:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Use nodeJs >= 16.X"),(0,r.kt)("li",{parentName:"ul"},"Clone Web app ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/hashed-io/hashed-network-portal-ui"},"repository")),(0,r.kt)("li",{parentName:"ul"},"Install quasar cli",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"yarn global add @quasar/cli\n"))),(0,r.kt)("li",{parentName:"ul"},"Install dependecies",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"cd hashed-network-portal-ui\nyarn install\n"))),(0,r.kt)("li",{parentName:"ul"},"Set env variables",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"cp .env.example .env\n")),"(By security reason we can not share on this documentation the secret keys)"),(0,r.kt)("li",{parentName:"ul"},"Start server",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"quasar dev\n")),"The application will be open automatically on your browser.")))}c.isMDXComponent=!0}}]);